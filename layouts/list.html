{{ define "main" }}
{{/*
  Include pages if at least one tag matches params.handleTags or
  default: ["go-module" "hugo-module"]
*/}}
{{ $p := default (slice "go-module" "hugo-module") ($.Param "handleTags") }}
{{ $pages := where .Site.RegularPages.ByTitle "Params.tags" "intersect" $p }}
{{ $paginator := .Paginate $pages }}

<table class="packagelist">
  <thead>
    <tr>
      <th>Go module overview</th>
    </tr>
  </thead>
  <tbody>
    {{ range $paginator.Pages -}}
      {{ $page := . }}
      {{/* prefer front matter import_path, else fallback based on page URL */}}
      {{ $importPath := or $page.Params.import_path (partial "function/getImportPath.html" $page.Permalink) }}
      {{ with $importPath }}
      <tr>
        <td>
          <tt>
            <a href="{{ $page.Permalink }}">{{ . }}</a>
          </tt>
        </td>
      </tr>
      {{ end }}
    {{- end }}
  </tbody>
</table>

{{ .Content }}

<nav class="pagination">
  {{ template "_internal/pagination.html" . }}
</nav>
{{ end }}
