<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  {{/*
    From https://pkg.go.dev/cmd/go#hdr-Remote_import_paths
    > The meta tag should appear as early in the file as possible. In particular,
    > it should appear before any raw JavaScript or CSS, to avoid confusing the
    > go commandâ€™s restricted parser.
  */}}
  {{ partial "metaGolang.html" . }}

  {{ if not hugo.IsProduction }}
  <meta name="robots" content="noindex,nofollow">
  {{ end }}

  {{/* Hugo scratch to store files and content for bundling CSS and JS assets */}}
  {{ $assets := newScratch }}

  {{/* Pico CSS */}}
  {{ $assets.Add "css" (slice (resources.Get "styles/pico.min.css")) }}

  {{/* Custom styling */}}
  {{ $assets.Add "css" (slice (resources.Get "styles/style.css")) }}

  {{/* Color scheme switch */}}
  {{ $assets.Add "js" (slice (resources.Get "js/schemeSwitch.js")) }}

  {{/* Get the scratch's CSS content as bundled, optimized file */}}
  {{ if $assets.Get "css" }}
    {{ $bundleCSS := $assets.Get "css" | resources.Concat "styles/bundle.css" | resources.Minify | resources.Fingerprint (.Site.Params.theme.fingerprintAlgorithm | default "sha256") }}
    <link type="text/css" rel="stylesheet" href="{{ $bundleCSS.RelPermalink }}" integrity="{{ $bundleCSS.Data.Integrity }}">
  {{ end }}

  {{/* Get the scratch's JS content as bundled, optimized file */}}
  {{ if $assets.Get "js" }}
    {{ $bundleJS := $assets.Get "js" | resources.Concat "js/bundle.js" | resources.Minify | resources.Fingerprint (.Site.Params.theme.fingerprintAlgorithm | default "sha256") }}
    <script defer id="script-bundle" src="{{ $bundleJS.RelPermalink }}" integrity="{{ $bundleJS.Data.Integrity }}"
            {{/* attributes used for js/schemeSwitch.js: x-turnonlightmode, x-turnondarkmode */}}
            x-text-turnonlightmode="{{- (partial `function/plainify.html` (i18n `header.colorSchemeSwitcherTurnOnLightMode`)) -}}"
            x-text-turnondarkmode="{{- (partial `function/plainify.html` (i18n `header.colorSchemeSwitcherTurnOnDarkMode`)) -}}"></script>
  {{ end }}
</head>
<body>

  {{ partial "header.html" . }}

  <main class="container">
    {{ block "main" . }}{{ end }}
  </main>

  {{ partial "footer.html" . }}
</body>
</html>