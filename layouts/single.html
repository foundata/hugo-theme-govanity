{{ define "main" }}
{{ if not hugo.IsProduction }}{{ "<!-- single.html: start -->" | safeHTML }}{{ end }}

{{ $page := .Page }}
{{ $importPath := or $page.Params.import_path (partial "function/getImportPath.html" $page.Permalink) }}

<div id="detail-view">

  <section>
    <h1>{{ .Title }}</h1>
    <p>
      {{ with .Params.description }}
        {{ . }}
      {{ else }}
        This page documents the Go import for <code>{{ .Title }}</code>.
      {{ end }}
    </p>
  </section>


  {{ with $importPath }}
    <section>
      <h3>Install</h3>
      <p>
        Add the dependency to your module with <code>go get</code>:
      </p>

      <code class="language-bash">
        go get "{{ . }}"
      </code>
    </section>

    <section>
      <h3>Upgrade</h3>
      <p>
        Update the dependency with <code>go get</code>:
      </p>

      <code class="language-bash">
        go get -u "{{ . }}"
      </code>
    </section>
  {{ end }}


  <section>
    <h3>
      Resources
    </h3>

    {{ $urls := $page.Params.urls }}
    {{ $repoRoot := $page.Params.repo.root }}
    {{ $fallbackSource := cond $repoRoot (printf "https://%s" $repoRoot) "" }}

    {{/* Read urls.source (supports nested key lookups and site fallback) */}}
    {{ $sourceParam := $page.Param "urls.source" }}

    {{/* If urls.source is present:
          - a string => use it
          - false (boolean) => keep it false to suppress link
          If urls.source is absent => fall back to https://<repo root> (when available). */}}
    {{ $sourceURL := default $fallbackSource $sourceParam }}

    <table class="striped">
      <thead>
        <tr>
          <th scope="col">
            Type
          </th>
          <th scope="col">
            Link
          </th>
        </tr>
      </thead>
      <tbody>
      {{ with $urls.doc }}
        <tr>
          <td>
            Documentation
          </td>
          <td>
            <a href="{{ . }}">{{ . }}</a>
          </td>
        </tr>
      {{ end }}
      {{ with $urls.website }}
        <tr>
          <td>
            Website
          </td>
          <td>
            <a href="{{ . }}">{{ . }}</a>
          </td>
        </tr>
      {{ end }}
      {{ with $sourceURL }}
        <tr>
          <td>
            Source code
          </td>
          <td>
            <a href="{{ . }}">{{ . }}</a>
          </td>
        </tr>
      {{ end }}
      </tbody>
    </table>
  </section>

  {{ with .Content }}
  <section>
    {{ . }}
  </section>
  {{ end }}

</div>

{{ if not hugo.IsProduction }}{{ "<!-- single.html: end -->" | safeHTML }}{{ end }}
{{ end }}
