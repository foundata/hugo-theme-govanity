{{ define "main" }}
<div class="package-details">
  {{ $page := .Page }}
  {{ $importPath := or $page.Params.import_path (partial "function/getImportPath.html" $page.Permalink) }}

  {{ with $importPath }}
    <h2>{{ . }}</h2>
    <code>go get "{{ . }}"</code>
    <code>import "{{ . }}"</code>
  {{ end }}

  {{ $urls := $page.Params.urls }}
  {{ $repoRoot := $page.Params.repo.root }}
  {{ $fallbackSource := cond $repoRoot (printf "https://%s" $repoRoot) "" }}

  {{/* Read urls.source (supports nested key lookups and site fallback) */}}
  {{ $sourceParam := $page.Param "urls.source" }}

  {{/* If urls.source is present:
        - a string => use it
        - false (boolean) => keep it false to suppress link
        If urls.source is absent => fall back to https://<repo root> (when available). */}}
  {{ $sourceURL := default $fallbackSource $sourceParam }}

  <ul class="package-links">
    {{ with $sourceURL }}
      <li>Source: <a href="{{ . }}">{{ . }}</a></li>
    {{ end }}
    {{ with $urls.doc }}
      <li>Docs: <a href="{{ . }}">{{ . }}</a></li>
    {{ end }}
    {{ with $urls.website }}
      <li>Website: <a href="{{ . }}">{{ . }}</a></li>
    {{ end }}
  </ul>
  <p>
    [ <a href="{{ `/` | relLangURL }}">Back to overview</a> ]
  </p>
</div>

<div class="package-content">
  {{ .Content }}
</div>
{{ end }}
